import{Combatant as t}from"../MageMaelstrom";import{ReadonlyCoordinate as e}from"../MageMaelstrom/Arena";class Dashing extends t{arena={width:0,height:0};huntTarget=new e;define(){return{name:"Dashing Rogue",icon:"/rogue.svg",strength:5,agility:30,intelligence:5,abilities:["dash","swift","serrated","vision"],handicap:!0}}init(t){this.arena=t.arena;this.shout("Where art thou!?");this.buildHuntTarget(!t.isLeft)}act(t){var e;return null!==(e=this.getFirstValidAction([()=>this.goAllOut(t),()=>this.beDashing(t),()=>this.hunt(t)]))&&void 0!==e?e:t.actions.dance()}getFirstValidAction(t){for(const e of t){const t=e();if(t)return t}}hunt({actions:t,helpers:e}){for(let s=0;s<10;s++){const s=t.moveTo(this.huntTarget);if(s&&e.canPerform(s))return this.shout("Where art thou!?"),s;this.buildHuntTarget(Math.random()>.5)}}buildHuntTarget(t){this.huntTarget=new e({x:t?this.arena.width-2:2,y:Math.random()>.5?this.arena.height-2:2})}beDashing({visibleEnemies:t,you:e,actions:s,helpers:i,spells:[n]}){const o=i.getClosest(t);if(o){if(!o.coords.isWithinRangeOf(3,e.coords)&&o.coords.isWithinRangeOf(5,e.coords)){const t=e.coords.getRelativeDirectionOf(o.coords),a=s.cast(n,t);if(i.canPerform(a))return this.shout("EN GARDE!!!"),a}return s.moveTo(o)}}goAllOut({helpers:t,visibleEnemies:e,spells:[,s],actions:i}){const n=t.getClosest(e);if(n){const e=i.cast(s,n.id);if(t.canPerform(e))return this.shout("My finest technique!"),e;const o=i.attack(n.id);if(t.canPerform(o))return this.shout("Take this, scoundrel!"),o}}onTakeDamage(t){}onStatusEffectApplied(t){}}export const dashingRogues={name:"Dashing Rogues",color:"#294",author:"Nick",CombatantSubclasses:[Dashing,Dashing]};