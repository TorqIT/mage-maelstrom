import{Combatant as e}from"../MageMaelstrom";class Summoner extends e{define(){return{name:"Summoner",icon:"/pentagram-rose.svg",strength:12,agility:10,intelligence:18,abilities:["bear","poison","mind","evasion"],handicap:!0}}init(e){}act(e){var s,t,n,i;return this.canSummon(e)?this.summonBear(e):this.hasBear(e)?this.bearIsFighting(e)?this.canPoisonBearTarget(e)?this.poisonEnemyTarget(e):null!==(s=this.comeInSwingin(e))&&void 0!==s?s:e.actions.dance():this.isFarFromBear(e)?null!==(t=this.followBear(e))&&void 0!==t?t:e.actions.dance():null!==(i=this.wanderAround(e))&&void 0!==i?i:e.actions.dance():null!==(n=this.comeInSwingin(e))&&void 0!==n?n:e.actions.dance()}canSummon({actions:e,helpers:s,spells:[t]}){return s.canPerform(e.cast(t))}summonBear({actions:e,spells:[s]}){return this.shout("Aaah, there you are old friend"),e.cast(s)}hasBear({allies:e}){return e.some((e=>!e.essential))}isFarFromBear({allies:e,helpers:s,you:t}){return s.getClosest(e.filter((e=>!e.essential))).coords.getDistance(t.coords)>4}followBear({actions:e,helpers:s,allies:t}){const n=s.getClosest(t.filter((e=>!e.essential)));return this.shout("Hunt them down!"),e.moveTo(n)}bearIsFighting({helpers:e,allies:s,visibleEnemies:t}){const n=e.getClosest(s.filter((e=>!e.essential)));return null!=this.getEnemyThatBearIsFighting(n,t)}canPoisonBearTarget({helpers:e,allies:s,visibleEnemies:t,actions:n,spells:[,i]}){const o=e.getClosest(s.filter((e=>!e.essential))),a=this.getEnemyThatBearIsFighting(o,t);return null!=a&&e.canPerform(n.cast(i,a.id))}poisonEnemyTarget({helpers:e,allies:s,visibleEnemies:t,actions:n,spells:[,i]}){const o=e.getClosest(s.filter((e=>!e.essential))),a=this.getEnemyThatBearIsFighting(o,t);return this.shout("This is gonna hurt!"),n.cast(i,a.id)}getEnemyThatBearIsFighting(e,s){return s.find((s=>s.coords.getDistance(e.coords)<2.5))}wanderAround({actions:e,helpers:s}){for(let t=0;t<10;t++){const t=["left","right","up","down"][Math.floor(4*Math.random())];if(s.canPerform(e.move(t)))return this.shout("Now where might they be?"),e.move(t)}}comeInSwingin({actions:e,visibleEnemies:s,helpers:t,spells:[,n]}){const i=t.getClosest(s);return i?t.canPerform(e.cast(n,i.id))?(this.shout("This is gonna hurt!"),e.cast(n,i.id)):(this.shout("You've got it coming for you now!"),e.attackMove(i)):e.dance()}onTakeDamage(e){}onStatusEffectApplied(e){}}export const summoners={name:"The Summoners",color:"#FA2",author:"Nick",CombatantSubclasses:[Summoner,Summoner]};